angular.module("ui-deni-grid",[]),angular.module("ui-deni-grid").constant("uiDeniGridConstants",{FIXED_COL_INDICATOR_WIDTH:"25px",FIXED_COL_ROWNUMBER_WIDTH:"38px",FIXED_COL_CHECKBOX_WIDTH:"30px",DEFAULT_COLUMN_HEADER_HEIGHT:"25px",DEFAULT_COLUMN_ROW_FOOTER_HEIGHT:"18px",DEFAULT_COLUMN_GROUPING_ROW_FOOTER_HEIGHT:"18px",DEFAULT_ROW_HEIGHT:"22px",PAGING_HEIGHT:"26px",DEFAULT_REALCE_CELLS:"background-color:#FFFF00;color:black;padding:1px;"}),angular.module("ui-deni-grid").directive("uiDeniGrid",function(e,o){return{restrict:"E",scope:{options:"="},replace:!1,bindToController:!0,controllerAs:"ctrl",controller:"uiDeniGridCtrl",template:e.get("ui-deni-grid"),link:function(e,o){}}}),angular.module("ui-deni-grid").service("uiDeniGridUtilSrv",function(e,o){var n=this;n.getFormatedValue=function(o,n){var n=n.toLowerCase();switch(n){case"currency":return e(n)(o);case"date":return e(n)(o,"shortDate");case"float":return e("currency")(o,"");case"int":case"integer":return o;case"lowercase":return o.toUpperCase();case"uppercase":return o.toLowerCase();default:return o}},n.setInputEditorDivCell=function(e,o,n,t){var r=function(){var e=n.editor;if(e===!0)e={type:"text"};else if(angular.isString(e))e={type:e};else if(!angular.isObject(e))throw new Error('"setInputEditorDivCell : " Property "editor" was set in a wrong way!');e.type==e.type.toLowerCase();var o;if("select"==e.type){o=$(document.createElement("select"));for(var t=0;t<e.items.length;t++){var r=document.createElement("option"),i=e.items[t];r.value=i.value,r.text=i.text,o.get(0).add(r)}}else o=$(document.createElement("input"));for(var a=Object.keys(n.editor),t=0;t<a.length;t++){var l=a[t];"items"!=l&&o.attr(l,n.editor[l])}return o},i=t.find(".ui-cell-inner"),a=i.html(),l=r();l.css("font-size",i.css("font-size")),l.css("font-family",i.css("font-familly")),l.addClass("ui-cell-input-editor"),l.attr("oldValue",a),l.val(a),i.remove();var s=t.css("padding");t.css("padding","0px"),t.append(l);var d=function(o,n){var r=o,i=r.parent(),a=$(document.createElement("span"));if(a.addClass("ui-cell-inner"),n){var l=r.val();r.remove(),i.append(a);var d=i.closest(".ui-row");e.options.api.updateCell(d.attr("rowindex"),i.attr("colindex"),l)}else{var c=r.attr("oldValue");a.html(c),r.remove(),i.append(a)}t.css("padding",s)};l.keydown(function(e){27!=e.keyCode&&13!=e.keyCode||(27==e.keyCode?d($(e.target),!1):13==e.keyCode&&d($(e.target),!0))}),l.focusout(function(e){d($(e.target),!1)}),l.focus()},n.getRealColumnWidth=function(e,o,n){var t=n||e.clientWidth,r=o;return r.indexOf("%")!=-1&&(r=r.replace("%",""),r=t*r/100,r+="px"),r},n.setRealPercentageWidths=function(e,o){for(var t=parseFloat(o.replace("%","")),r=0;r<e.length;r++){if("100%"!=o){var i=parseFloat(e[r].width.replace("%",""));e[r].realPercentageWidth=t*i/100+"%"}var a=e[r].columns;a&&a.length>0&&n.setRealPercentageWidths(a,e[r].width)}},n.getClientWidthDeniGrid=function(e){var o=e.bodyViewport.get(0).offsetWidth-e.bodyViewport.get(0).clientWidth,n=e.colsContainer.width()-o;return n},n.adjustColumnWidtsAccordingColumnHeader=function(e,o,n){var t=o.closest(".ui-header-container"),r=o.closest(".ui-container").find(".ui-body-container");r.find(".ui-row:not(.row-detail)").css("width",t.css("width"));var i=o.css("width");o.is(".ui-header-container-column.last-subcolumn")&&(i="calc("+i+" + 2px)"),r.find(".ui-cell[colIndex="+n+"]").css("width",i),e.options.data.length>0&&r.width(t.width())},n.adjustAllColumnWidtsAccordingColumnHeader=function(e){if(angular.isDefined(e.options.columns)){for(var o=(n.getColumns(e,e.options.columns),!1),t=0;t<e.options.columns.length;t++)if(e.options.columns[t].width.toString().indexOf("%")!=-1){o=!0;break}o&&e.bodyContainer.find(".ui-row").css("width","100%")}for(var t=0,r=e.fixedColsHeaderContainer.find(".ui-header-container-column:not(.has-subcolumns)"),i=0;i<r.length;i++){var a=$(r[i]);n.adjustColumnWidtsAccordingColumnHeader(e,a,t),t++}for(var r=e.headerContainer.find(".ui-header-container-column:not(.has-subcolumns)"),i=0;i<r.length;i++){var a=$(r[i]);n.adjustColumnWidtsAccordingColumnHeader(e,a,t),t++}},n.setDefaultOptions=function(e){var t={};if(t.api={},t.listeners={},t.selType="row",t.colLines=!0,t.rowLines=!0,t.autoLoad=!0,t.columnHeaderHeight=o.DEFAULT_COLUMN_HEADER_HEIGHT,t.columnFooterRowHeight=o.DEFAULT_COLUMN_ROW_FOOTER_HEIGHT,t.columnGroupingFooterRowHeight=o.DEFAULT_COLUMN_GROUPING_ROW_FOOTER_HEIGHT,t.enableGrouping=!0,t.enableColumnResize=!0,t.hideHeaders=!1,t.rowHeight=o.DEFAULT_ROW_HEIGHT,t.multiSelect=!1,t.sortableColumns=!0,t.sorters=[],t.stripRows=!0,angular.extend(t,e.options),e.options=t,e.options.hideHeaders=e.options.hideHeaders===!0||angular.isDefined(e.options.rowTemplate)||angular.isDefined(e.options.cardView),e.options.cardView&&(e.options.rowHeight=e.options.cardView.rowHeight||"150px"),e.options.rowHeight=e.options.rowHeight.toString(),e.isGrouped=e.options.enableGrouping&&angular.isDefined(e.options.grouping),e.isGrouped){if(angular.isString(e.options.grouping)&&(e.options.grouping={expr:e.options.grouping}),!angular.isObject(e.options.grouping)||angular.isArray(e.options.grouping))throw new Error('"loadData": param "grouping" passed in a wrong way');var r="<b>{"+e.options.grouping.expr+"}</b> ({count})";e.options.grouping.template=e.options.grouping.template||r}if(e.options.fixedCols){var i=function(t){var r=0;if(e.options.fixedCols.indicator&&(r+=parseFloat(o.FIXED_COL_INDICATOR_WIDTH.replace("px",""))),e.options.fixedCols.rowNumber&&(r+=parseFloat(o.FIXED_COL_ROWNUMBER_WIDTH.replace("px",""))),e.options.fixedCols.checkbox&&(r+=parseFloat(o.FIXED_COL_CHECKBOX_WIDTH.replace("px",""))),e.options.fixedCols.columns)for(var i=0;i<t.length;i++)r+=parseFloat(n.getRealColumnWidth(e,t[i].width).replace("px",""));return r};if(e.options.fixedCols===!0&&(e.options.fixedCols={indicator:!0}),angular.isDefined(e.options.fixedCols.indicator)&&e.options.fixedCols.indicator!==!0&&e.options.fixedCols.indicator!==!1)throw new Error('"setInitialDefaultOptions" : "fixedCols.indicator" property was set in a wrong way! (it must be a boolean value)');if(angular.isDefined(e.options.fixedCols.rowNumber)&&e.options.fixedCols.rowNumber!==!0&&e.options.fixedCols.rowNumber!==!1)throw new Error('"setInitialDefaultOptions" : "fixedCols.rowNumber" property was set in a wrong way! (it must be a boolean value)');if(angular.isDefined(e.options.fixedCols.checkbox)&&e.options.fixedCols.checkbox!==!0&&e.options.fixedCols.checkbox!==!1)throw new Error('"setInitialDefaultOptions" : "fixedCols.checkbox" property was set in a wrong way! (it must be a boolean value)');var a=e.options.fixedCols.columns;if(a){if(!angular.isArray(a))throw new Error('"setInitialDefaultOptions" : "fixedCols.columns" property was set in a wrong way!');for(var l=0;l<a.length;l++){for(var s=!1,d=0;d<e.options.columns.length;d++){var c=e.options.columns[d];if(c.name==a[l]){a[l]=c,s=!0;break}}if(!s)throw new Error('"setInitialDefaultOptions" : "fixedCols.columns" -> column "'+a[l]+'" not found!')}}e.options.fixedCols.width=i(a)}e.options.paging&&(e.options.paging===!0&&(e.options.paging={}),e.options.paging.type=e.options.paging.type||"json",e.options.paging.pageSize=e.options.paging.pageSize||50,e.options.paging.currentPage=e.options.paging.currentPage||1);var p=e.options.restConfig,u={type:"json",data:"data",total:"total",start:"start",limit:"limit"};p?angular.extend(u,p):p=u,e.options.restConfig=p},n.remakeHeightBodyViewportWrapper=function(e){var n=3,t=0;"none"!=e.headerViewportWrapper.css("display")&&(t+=e.headerViewportWrapper.height()),e.options.paging&&e.container.css("height","calc(100% - "+o.PAGING_HEIGHT+")"),"none"!=e.footerViewportWrapper.css("display")&&(t+=e.footerViewportWrapper.height()+n);var r="calc(100% - "+t+"px)";e.bodyViewportWrapper.css("height",r)},n.hasColumnFooter=function(e){if(e.options.columns)for(var o=e.options.columns,n=0;n<o.length;n++)if(o[n].footer)return!0;return!1},n.getColumnHeaderLevels=function(e,o){for(var t=0,r=0,i=0;i<o.length;i++){var a=o[i];a.columns&&(r=n.getColumnHeaderLevels(e,a.columns),r>t&&(t=r))}return 1+t},n.getColumnFooterNumber=function(e){var o=0;if(e.options.columns)for(var n=0;n<e.options.columns.length;n++){var t=e.options.columns[n];if(t.footer){var r=angular.isArray(t.footer)?t.footer.length:1;r>o&&(o=r)}}return o},n.getColumnFooterRowsNumber=function(e,o){var n=0;if(e.options.columns)for(var t=0;t<e.options.columns.length;t++){var r=e.options.columns[t];if(r.footer){var i=1;if(angular.isArray(r.footer)){i=0;for(var a=0;a<r.footer.length;a++){var l=r.footer[a];angular.isObject(l)?o?0!=l.grouping&&i++:0!=l.grid&&i++:i++}}i>n&&(n=i)}}return n},n.createColumnFooters=function(e,o,t,r){if(!angular.isDefined(e.options.footerTemplate)){var i,a,l;r?(i="ui-footer-row",a="ui-footer-cell",l="ui-footer-cell-inner"):(i="ui-grouping-footer-row",a="ui-grouping-footer-cell",l="ui-grouping-footer-cell-inner");for(var s,d,c=r?e.columnFooterRowsNumberGrid:e.columnFooterRowsNumberGrouping,p=r?e.options.columnFooterRowHeight:e.options.columnGroupingFooterRowHeight,u=0;u<c;u++){var f=$(document.createElement("div"));if(f.css("height",p),f.addClass(i),f.attr("index",u),!angular.isDefined(e.options.footerRowTemplate))for(var g=0,m=0;m<t.length;m++){var w=t[m];s=$(document.createElement("div")),s.addClass(a),s.attr("index",m),s.css({width:n.getRealColumnWidth(e,w.width),"text-align":w.align}),f.append(s),w.footer&&(d=$(document.createElement("span")),d.addClass(l),g++,s.append(d),angular.isArray(w.footer)||(w.footer=[w.footer]))}o.append(f)}if(c>0){var v=o.find("."+i),h=$(v.get(0));h.find("."+a).addClass("first-row");var C=$(v.get(v.length-1));C.find("."+a).addClass("last-row");var x=h.find("."+a).length;o.find("."+a+"[footerColIndex=0]").addClass("first-col"),o.find("."+a+"[footerColIndex="+(x-1)+"]").addClass("last-col")}}},n.renderColumnFooters=function(e,o,t,r,i){var a,l,s;i?(a="ui-footer-row",l="ui-footer-cell",s="ui-footer-cell-inner"):(a="ui-grouping-footer-row",l="ui-grouping-footer-cell",s="ui-grouping-footer-cell-inner");for(var d={},c=0,p=0;p<e.columnFooterNumber;p++){var u,f={};angular.isDefined(e.options.footerTemplate)||(u=$(o.find("."+a)[p]));for(var g=0;g<t.length;g++){var m=t[g];if(m.footer){var w=m.footer[p];if(angular.isDefined(w)){var v=0!=w.grid,h=0!=w.grouping,C=i&&v||!i&&h;if(C){var x=Object.keys(n.defaultFunctions);angular.isString(w)?w=x.indexOf(w.toLowerCase())==-1?{text:w}:{fn:w.toLowerCase()}:angular.isFunction(w)&&(w={fn:w});var b=w.fn;if(angular.isDefined(b)){var I;if(angular.isFunction(b))I=b(r,m.name);else{if(!angular.isString(b))throw new Error('"renderColumnFooters" : "fn" param passed in a wrong way!');if(x.indexOf(b.toLowerCase())==-1)throw new Error('"renderColumnFooters" : "'+b+'" is not a default function!');var R=b.toUpperCase();w.text=w.text||b.toLowerCase()+" : ","AVG"==R?I=n.defaultFunctions.avg(r,m.name):"COUNT"==R?I=n.defaultFunctions.count(r):"MAX"==R?I=n.defaultFunctions.max(r,m.name):"MIN"==R?I=n.defaultFunctions.min(r,m.name):"SUM"==R&&(I=n.defaultFunctions.sum(r,m.name))}var E=w.format||m.format;if(angular.isDefined(E)&&(I=n.getFormatedValue(I,E)),angular.isDefined(e.options.footerTemplate))d[m.name+"("+p+").text"]=w.text,d[m.name+"("+p+").value"]=I;else if(angular.isDefined(e.options.footerRowTemplate))f[m.name+".text"]=w.text,f[m.name+".value"]=I;else{u=$(o.find("."+a)[c]);var y=$(u.find("."+l).get(g));angular.isDefined(w.align)&&y.css("text-align",w.align),angular.isDefined(w.style)&&y.css(w.style);var D=y.find("."+s);D.empty();var V=$(document.createElement("span"));V.addClass("fn-value"),D.append(V),V.html(I),w.valueRenderer&&(I=w.valueRenderer(V,I));var T=$(document.createElement("span"));T.addClass("fn-text"),T.insertBefore(V),T.html(w.text),w.textRenderer&&(w.text=w.textRenderer(T,w.text))}}else{if(!angular.isDefined(w.text))throw new Error('"renderColumnFooters" : column footer neither has "function" nor "text" property was set!');D.html(w.text)}c++}}}}if(angular.isDefined(e.options.footerRowTemplate)){var F=n.applyTemplateValues(e.options.footerRowTemplate,f);u.html(F),u.css("width","100%")}}if(angular.isDefined(e.options.footerTemplate)){var F=n.applyTemplateValues(e.options.footerTemplate,d);o.html(F)}},n.createPagingItems=function(e,o,n){var t=$(document.createElement("span"));t.addClass("button"),t.addClass("button-first"),t.addClass("disabled"),o.append(t),t.click(function(o){e.options.api.setPageNumber(1)});var r=$(document.createElement("span"));r.addClass("button"),r.addClass("button-prev"),r.addClass("disabled"),o.append(r),r.click(function(o){e.options.api.setPageNumber(e.options.api.getPageNumber()-1)});var i=$(document.createElement("span"));i.addClass("separator"),o.append(i);var a=$(document.createElement("span"));a.addClass("label-page-number"),a.html("Page"),o.append(a);var l=$(document.createElement("input"));l.addClass("input-page-number"),l.attr("type","text"),l.attr("value",e.options.paging.currentPage),o.append(l),l.keydown(function(o){if(13==o.keyCode){var n=parseInt($(o.target).val());n<1?n=1:n>e.options.paging.pageCount&&(n=e.options.paging.pageCount),e.options.api.setPageNumber(n),$(o.target).select()}}),l.focusin(function(e){$(e.target).select()});var s=$(document.createElement("span"));s.addClass("label-page-count"),o.append(s);var d=$(document.createElement("span"));d.addClass("separator"),o.append(d);var c=$(document.createElement("span"));c.addClass("button"),c.addClass("button-next"),c.addClass("disabled"),o.append(c),c.click(function(o){e.options.api.setPageNumber(e.options.api.getPageNumber()+1)});var p=$(document.createElement("span"));p.addClass("button"),p.addClass("button-last"),p.addClass("disabled"),o.append(p),p.click(function(o){e.options.api.setPageNumber(e.options.paging.pageCount)});var u=$(document.createElement("span"));u.addClass("separator"),o.append(u);var f=$(document.createElement("span"));f.addClass("button"),f.addClass("button-refresh"),o.append(f),f.click(function(o){e.options.api.reload()});var g=$(document.createElement("span"));g.addClass("label-record-count"),o.append(g);var m=$(document.createElement("span"));m.addClass("separator"),m.css("float","right"),o.append(m);var w=$(document.createElement("span"));if(w.addClass("label-displaying"),o.append(w),angular.isDefined(n.buttons))if(angular.isArray(n.buttons)){var v=$(document.createElement("span"));v.addClass("separator"),v.css({"float":"right","margin-left":"4px"}),o.append(v),angular.forEach(n.buttons,function(e){var n=$(document.createElement("span"));n.addClass("button"),n.addClass("button-additional"),n.addClass("disabled"),n.html(e.text),o.append(n),n.get(0).onclick=e.click})}else console.log('"buttons" property must be a array.');o.find(".button").mouseenter(function(e){$(e.target).addClass("hover")}),o.find(".button").mouseout(function(e){$(e.target).removeClass("hover")})},n.defaultFunctions={avg:function(e,o){return n.defaultFunctions.sum(e,o)/e.length},count:function(e){return e.length},max:function(e,o){for(var n=Number.MIN_VALUE,t=0;t<e.length;t++){var r=e[t];value=r[o],value>n&&(n=value)}return n},min:function(e,o){for(var n=Number.MAX_VALUE,t=0;t<e.length;t++){var r=e[t];value=r[o],value<n&&(n=value)}return n},sum:function(e,o){for(var n=0,t=0;t<e.length;t++){var r=e[t];n+=r[o]}return n}};n.rowDetailsExpand=function(e,o,n,t){var r=o.find(".ui-cell-inner.row-detail");r.removeClass("expand"),r.addClass("collapse"),o.addClass("row-detail-expanded"),e.managerRendererItems.insertRowDefailtBox(t),e.options.api.repaint()},n.rowDetailsCollapse=function(e,o,n,t){var r=o.find(".ui-cell-inner.row-detail");r.removeClass("collapse"),r.addClass("expand"),o.removeClass("row-detail-expanded"),e.managerRendererItems.removeRowDetailtBox(t),e.options.api.repaint()};n.groupExpand=function(e,o,n,t){var r=o.attr("groupIndex");if(angular.isDefined(r)){r=parseInt(r);for(var i=[],a=(e.options.data,0);a<e.options.data.length;a++){var l=e.options.data[a];l.groupIndex==r&&i.push(a)}e.managerRendererItems.insertChildrenGroup(r,i),e.options.api.repaint()}},n.groupCollapse=function(e,o,n,t){var r=o.attr("groupIndex");angular.isDefined(r)&&(r=parseInt(r),e.managerRendererItems.removeAllChildrenGroup(r),e.options.api.repaint())},n.transformToArrayValue=function(e){var o=[];return e&&(Array.isArray(e)?o=e:o.push(e)),o},n.applyTemplateValues=function(e,o,t){var r=n.prepareForNestedJson(o);angular.extend(r,t);for(var i=Object.keys(r),a=e,l=0;l<i.length;l++)for(var s=i[l],d=r[s],c="{"+s+"}",p=a.indexOf(c);p!=-1;)a=a.replace(c,d),p=a.indexOf(c,p+d.length);return a},n.prepareForNestedJson=function(e){var o={},n=function(e,t){var r="[object Array]"==toString.call(e)?"]":"";for(var i in e)e.hasOwnProperty(i)&&(angular.isObject(e[i])||(o[t+i+r]=e[i]),"[object Array]"==toString.call(e[i])?n(e[i],t+i+r+"["):"[object Object]"==toString.call(e[i])&&n(e[i],t+i+r+"."))};return n(e,""),o},n.getColumns=function(e,o){for(var t=[],r=0;r<o.length;r++){var i=o[r];i.columns?t=t.concat(n.getColumns(e,i.columns)):t.push(i)}return t},n.isFixedColumn=function(e,o){if(!e.options.fixedCols||!e.options.fixedCols.columns)return!1;for(var n=0;n<e.options.fixedCols.columns.length;n++)if(e.options.fixedCols.columns[n].name==o)return!0},n.format=function(){for(var e=arguments[0],o=1;o<arguments.length;o++){var n=new RegExp("\\{"+(o-1).toString()+"\\}","gi");e=e.replace(n,arguments[o])}return e},n.ManagerRendererItems=function(e){var o=this;o.rowHeight=parseInt(e.options.rowHeight.replace("px","")),o.items=[],o.renderedItems=[],o.createItems=function(){o.items=[];var t=0;if(e.options.api.isGrouped()){for(var r=0;r<e.options.dataGroup.length;r++)if(o.items.push({top:t,height:o.rowHeight,rowIndex:e.options.dataGroup[r].rowIndex,groupIndex:r,children:e.options.dataGroup[r].children}),t+=o.rowHeight,n.hasColumnFooter(e)&&e.columnFooterRowsNumberGrouping>0){var i=e.options.columnGroupingFooterRowHeight;i=parseInt(i.toString().replace("px","")),i*=e.columnFooterRowsNumberGrouping,o.items.push({top:t,height:i,rowIndex:e.options.dataGroup[r].rowIndex,groupIndex:r,children:e.options.dataGroup[r].children,footerContainer:!0}),t+=i}}else for(var a=angular.isDefined(e.options.cardView)?e.options.cardView.numberOfColumns:1,r=0;r<e.options.data.length;)for(var l=0;l<a;l++){if(o.items.push({top:t,height:o.rowHeight,rowIndex:r}),t+=o.rowHeight,e.options.rowDetails&&e.options.rowDetails.autoExpand){var i=e.options.rowDetails.height||50;i=parseInt(i.toString().replace("px","")),o.items.push({top:t,height:i,rowIndex:r,rowDetails:!0}),t+=i}r++}},o.removeRow=function(e,n){for(var t,r=!1,i=0;i<o.items.length;i++){var a=o.items[i];r?(a.rowIndex--,a.top=t,a.rendered&&a.rowElement.remove(),a.rendered=!1,t+=a.height):a.rowIndex==n&&(r=!0,t=a.top,o.items.splice(i,1),a.rendered&&a.rowElement.remove(),e.options.data.splice(n,1),i--)}var l=o.items[o.items.length-1].top+o.rowHeight;e.bodyContainer.height(l),e.fixedColsBodyContainer.height(l)},o.insertRowDefailtBox=function(n){for(var t,r=!1,i=0;i<o.items.length;i++){var a=o.items[i];if(r)a.top=t,a.rendered&&a.rowElement.css("top",t+"px"),t+=a.height;else if(a.rowIndex==n){a.expanded=!0,r=!0,t=a.top+a.height-2;var l=e.options.rowDetails.height||50;l=parseInt(l.toString().replace("px","")),o.items.splice(i+1,0,{top:t,height:l,rowIndex:n,rowDetails:!0}),i++,t+=l}}var s=o.items[o.items.length-1].top+o.rowHeight;e.bodyContainer.height(s),e.fixedColsBodyContainer.height(s)},o.removeRowDetailtBox=function(n){for(var t,r=!1,i=0;i<o.items.length;i++){var a=o.items[i];r?(a.top=t,a.rendered&&a.rowElement.css("top",t+"px"),t+=a.height):a.rowIndex==n&&(a.expanded=!1,r=!0,t=a.top+a.height,e.bodyContainer.find(".ui-row.row-detail-container[rowindex="+n+"]").remove(),o.items.splice(i+1,1))}var l=o.items[o.items.length-1].top+o.rowHeight;e.bodyContainer.height(l),e.fixedColsBodyContainer.height(l)},o.insertChildrenGroup=function(n,t){for(var r,i=!1,a=0;a<o.items.length;a++){var l=o.items[a];if(i)l.top=r,l.rendered&&l.rowElement.css("top",r+"px"),r+=l.height;else if(l.groupIndex==n){l.expanded=!0,i=!0,r=l.top+l.height;for(var s=0;s<t.length;s++)o.items.splice(a+1+s,0,{top:r,height:o.rowHeight,rowIndex:t[s],groupIndex:n,indexInsideGroup:s}),r+=o.rowHeight;a+=t.length}}var d=o.items[o.items.length-1].top+o.rowHeight;e.bodyContainer.height(d),e.fixedColsBodyContainer.height(d)},o.removeAllChildrenGroup=function(n){for(var t,r=!1,i=0;i<o.items.length;i++){var a=o.items[i];if(r)a.top=t,a.rendered&&a.rowElement.css("top",t+"px"),t+=a.height;else if(a.groupIndex==n){for(a.expanded=!1,r=!0,i++;o.items[i].groupIndex==n;){var l=o.items[i];if(l.footerContainer)break;l.rendered&&l.rowElement.remove(),o.items.splice(i,1)}i--,t=a.top+a.height}}var s=o.items[o.items.length-1].top+o.rowHeight;e.bodyContainer.height(s),e.fixedColsBodyContainer.height(s)},o.getVisibleRows=function(){for(var n=[],t=e.bodyViewport.scrollTop(),r=t+e.bodyViewport.height(),i=0;i<o.items.length;i++){var a=o.items[i];a.top+a.height>t&&a.top<r&&n.push(a)}return n},o.removeAllNotVisibleElementsRows=function(e,n){for(var t=0;t<o.items.length;t++){var r=o.items[t];if(r.rendered&&n.indexOf(r)==-1&&!r.footerContainer){var i=".ui-row[rowindex="+r.rowIndex+"]:not(.ui-grouping-footer-container)";e.bodyContainer.find(i).remove(),e.fixedColsBodyContainer.find(i).remove(),r.rendered=!1,r.rowElement=void 0}}},o.setAllElementsToNotRendered=function(){for(var e=0;e<o.items.length;e++){var n=o.items[e];n.rendered=!1,n.rowElement=void 0}},o.getInfoGroup=function(e){for(var n=0;n<o.items.length;n++){var t=o.items[n];if(t.groupIndex==e&&angular.isDefined(t.children))return t}return null},o.getInfoRow=function(e){for(var n=0;n<o.items.length;n++){var t=o.items[n];if(t.rowIndex==e)return t}return null},o.adjustElementTop=function(e){e.rowElement.css("top",e.top+"px")}}}),angular.module("ui-deni-grid").controller("uiDeniGridCtrl",function(e,o,n,t,r,i){var a=this;a.scope=e,a.enabled=!0,a.checkedRecords=[],a.filterInfo=null,a.searchInfo=null,a.loading=!1,a.element=o,a.wrapper=a.element.find(".ui-deni-grid-wrapper"),a.viewport=a.wrapper.find(".ui-deni-grid-viewport"),a.container=a.viewport.find(".ui-deni-grid-container"),a.colsViewportWrapper=a.container.find(".ui-variable-cols-viewport-wrapper"),a.colsViewport=a.colsViewportWrapper.find(".ui-viewport"),a.colsContainer=a.colsViewport.find(".ui-container"),a.headerViewportWrapper=a.colsContainer.find(".ui-header-viewport-wrapper"),a.headerViewport=a.headerViewportWrapper.find(".ui-header-viewport"),a.headerContainer=a.headerViewport.find(".ui-header-container"),a.bodyViewportWrapper=a.colsContainer.find(".ui-body-viewport-wrapper"),a.bodyViewport=a.bodyViewportWrapper.find(".ui-body-viewport"),a.bodyContainer=a.bodyViewport.find(".ui-body-container"),a.footerViewportWrapper=a.colsContainer.find(".ui-footer-viewport-wrapper"),a.footerViewport=a.footerViewportWrapper.find(".ui-footer-viewport"),a.footerContainer=a.footerViewport.find(".ui-footer-container"),a.fixedColsViewportWrapper=a.container.find(".ui-fixed-cols-viewport-wrapper"),a.fixedColsViewport=a.fixedColsViewportWrapper.find(".ui-viewport"),a.fixedColsContainer=a.fixedColsViewport.find(".ui-container"),a.fixedColsHeaderViewportWrapper=a.fixedColsContainer.find(".ui-header-viewport-wrapper"),a.fixedColsHeaderViewport=a.fixedColsHeaderViewportWrapper.find(".ui-header-viewport"),a.fixedColsHeaderContainer=a.fixedColsHeaderViewport.find(".ui-header-container"),a.fixedColsBodyViewportWrapper=a.fixedColsContainer.find(".ui-body-viewport-wrapper"),a.fixedColsBodyViewport=a.fixedColsBodyViewportWrapper.find(".ui-body-viewport"),a.fixedColsBodyContainer=a.fixedColsBodyViewport.find(".ui-body-container"),a.fixedColsFooterViewportWrapper=a.fixedColsContainer.find(".ui-footer-viewport-wrapper"),a.fixedColsFooterViewport=a.footerViewportWrapper.find(".ui-footer-viewport"),a.fixedColsFooterContainer=a.footerViewport.find(".ui-footer-container");a.element.css("height");a.paging=a.viewport.find(".ui-deni-grid-paging"),r.setDefaultOptions(a,a.options),a.options.alldata=[],a.options.api={clearSelections:function(){t.clearSelections(a)},find:function(e,o){return t.find(a,e,o)},findFirst:function(e,o){return t.findFirst(a,e,o)},findKey:function(e,o){return t.findKey(a,e,o)},findLast:function(e,o){return t.findLast(a,e,o)},findNext:function(e,o){return t.findNext(a,e,o)},findPrevious:function(e,o){return t.findPrevious(a,e,o)},filter:function(e,o){return t.filter(a,e,o)},getChangedRecords:function(){return t.getChangedRecords(a)},getColumn:function(e){return t.getColumn(a,e)},getEnabled:function(e){return a.enabled},getPageNumber:function(){return t.getPageNumber(a)},getRowHeight:function(){return t.getRowIndex(a)},getRowIndex:function(e){return t.getRowIndex(a,e)},getSelectedRow:function(){return t.getSelectedRow(a)},getSelectedRowIndex:function(){return t.getSelectedRowIndex(a)},isEnableGrouping:function(){return t.isEnableGrouping(a)},isGrouped:function(){return t.isGrouped(a)},isRowSelected:function(e){return t.isRowSelected(a,e)},isRowVisible:function(e){return t.isRowVisible(a,e)},load:function(){t.load(a)},loadData:function(e){t.loadData(a,e)},isHideHeaders:function(){return t.isHideHeaders(a)},reload:function(){return t.reload(a)},removeRow:function(e){t.removeRow(a,e)},removeSelectedRows:function(){t.removeSelectedRows(a)},resolveRowElement:function(e){return t.resolveRowElement(a,e)},resolveRowIndex:function(e){return t.resolveRowIndex(a,e)},repaint:function(){t.repaint(a)},repaintRow:function(e){return t.repaintRow(a,e)},repaintSelectedRow:function(){return t.repaintSelectedRow(a)},setDisableGrouping:function(){t.setDisableGrouping(a)},setEnableGrouping:function(){t.setEnableGrouping(a)},setHideHeaders:function(e){return t.setHideHeaders(a,e)},selectAll:function(){t.selectAll(a)},setEnabled:function(e){t.setEnabled(a,e)},selectRow:function(e,o,n){t.selectRow(a,e,o,n)},setPageNumber:function(e){t.setPageNumber(a,e)},setRowHeight:function(e){t.setRowHeight(a,e)},setToogleGrouping:function(){t.setToogleGrouping(a)},sort:function(e,o){return a.options.sorters=t.sort(a,e,o)},updateSelectedRow:function(e){t.updateSelectedRow(a,e)},updateCell:function(e,o,n){t.updateCell(a,e,o,n)},updateSelectedCell:function(e){t.updateSelectedCell(a,e)}},a.element.show(function(e){if(a.options.fixedCols?(a.fixedColsViewportWrapper.css("width",a.options.fixedCols.width+"px"),a.colsViewportWrapper.css("width","calc(100% - "+a.fixedColsViewportWrapper.css("width")+")")):(a.fixedColsViewportWrapper.css("display","none"),a.colsViewportWrapper.css("width","100%")),a.clientWidth=r.getClientWidthDeniGrid(a),a.options.hideHeaders?(a.headerViewportWrapper.css("display","none"),a.fixedColsHeaderViewportWrapper.css("display","none")):(a.columnHeaderLevels=r.getColumnHeaderLevels(a,a.options.columns),a.columnHeaderLevels>1&&r.setRealPercentageWidths(a.options.columns,"100%"),t.createColumnHeaders(a,a.options.columns),t.createColumnHeadersEvents(a),a.headerViewportWrapper.css("height","calc("+a.options.columnHeaderHeight+" * "+a.columnHeaderLevels+")"),a.fixedColsHeaderViewportWrapper.css("height","calc("+a.options.columnHeaderHeight+" * "+a.columnHeaderLevels+")")),a.options.colLines&&a.headerContainer.find(".ui-header-container-column").css("border-right","solid 1px silver"),a.columnFooterRowsNumberGrid=r.getColumnFooterRowsNumber(a),a.columnFooterRowsNumberGrouping=r.getColumnFooterRowsNumber(a,!0),a.columnFooterNumber=r.getColumnFooterNumber(a),r.hasColumnFooter(a)&&a.columnFooterRowsNumberGrid>0){r.createColumnFooters(a,a.footerContainer,a.options.columns,!0);var o=(a.footerContainer.find(".ui-footer-row").length,angular.isDefined(a.options.footerRowTemplate)?"0px":"2px");a.footerViewportWrapper.css({"padding-top":o})}else a.footerViewportWrapper.css("display","none"),a.fixedColsFooterViewportWrapper.css("display","none");a.options.paging&&(a.paging.css("height",i.PAGING_HEIGHT),r.createPagingItems(a,a.paging,a.options.paging)),a.searchInfo=null,a.searching=!1,a.resizing=!1,a.managerRendererItems=new r.ManagerRendererItems(a),t.createUiDeniViewEvents(a),r.remakeHeightBodyViewportWrapper(a),a.options.data?a.options.api.loadData(a.options.data):a.options.url&&a.options.autoLoad&&a.options.api.load()})}),angular.module("ui-deni-grid").service("uiDeniGridSrv",function($compile,$timeout,$templateCache,$q,$http,$filter,uiDeniGridUtilSrv,uiDeniGridConstants){var me=this;me.clearSelections=function(e){e.bodyViewport.find(".ui-row.selected").removeClass("selected"),e.fixedColsBodyViewport.find(".ui-row.selected").removeClass("selected"),e.bodyViewport.find(".ui-cell.selected").removeClass("selected"),e.fixedColsBodyViewport.find(".ui-cell.selected").removeClass("selected")},me.selectAll=function(e){if(!e.options.multiSelect)throw new Error('"selectAll" : to use selectAll method you must set multiSelect property to true!');e.bodyViewport.find(".ui-row.selected").addClass("selected"),e.bodyViewport.find(".ui-cell.selected").addClass("selected")},me.createColumnHeaders=function(e,o,n,t,r){var i=[],a=function(o){var n=$(document.createElement("div"));return n.addClass("ui-header-container-column-row"),n.css("height",e.options.columnHeaderHeight),o.append(n),n};e.options.fixedCols?(angular.copy(o,i),e.options.fixedCols.rowNumber&&i.splice(0,0,{width:uiDeniGridConstants.FIXED_COL_ROWNUMBER_WIDTH,isFixedColumn:!0}),e.options.fixedCols.indicator&&i.splice(0,0,{width:uiDeniGridConstants.FIXED_COL_INDICATOR_WIDTH,isFixedColumn:!0}),e.options.fixedCols.checkbox&&i.splice(0,0,{width:uiDeniGridConstants.FIXED_COL_CHECKBOX_WIDTH,isFixedColumn:!0,isCheckbox:!0})):i=o;for(var l=(n?n.width():e.clientWidth,t||1),s=!1,d=0;d<e.options.columns.length;d++)if(e.options.columns[d].width.toString().indexOf("%")!=-1){s=!0;break}s&&(e.headerViewport.css("width","calc(100% - 17px)"),e.headerContainer.css("width","100%"));for(var c=r||0,p=0;p<i.length;p++){var u=i[p],f=$(document.createElement("div"));f.css("width",u.width),f.addClass("ui-header-container-column"),f.attr("colindex",c),angular.isDefined(n)&&(0==p?f.addClass("first-subcolumn"):p==i.length-1&&f.addClass("last-subcolumn"));var g=g=a(f),m=$(document.createElement("div"));m.addClass("ui-header-cell"),m.attr("colindex",c),m.attr("name",u.name),m.css("text-align",u.align),g.append(m);var w=$(document.createElement("span"));if(w.addClass("ui-header-cell-inner"),m.append(w),u.isCheckbox){var v=$(document.createElement("input"));v.attr("type","checkbox"),v.css({cursor:"pointer"}),m.css({"text-align":"center"}),w.append(v),v.change(function(o){for(var n=e.fixedColsBodyContainer.find(".ui-cell-inner.checkbox").find("input[type=checkbox]"),t=0;t<n.length;t++)n[t].checked=o.target.checked})}else{var h=u.header||u.name;w.html(h),u.action&&(f.addClass("action-button-column"),m.addClass("action-button-column"))}if(angular.isDefined(n)?n.append(f):u.isFixedColumn||uiDeniGridUtilSrv.isFixedColumn(e,u.name)?e.fixedColsHeaderContainer.append(f):e.headerContainer.append(f),e.columnHeaderLevels>1)if(u.columns){f.addClass("has-subcolumns"),m.addClass("has-subcolumns"),g=a(f),me.createColumnHeaders(e,u.columns,g,l+1,c);var C=g.find(".ui-header-container-column.last-subcolumn");c=C.attr("colIndex")}else if(l<e.columnHeaderLevels){var x=g.css("height"),b=e.columnHeaderLevels-l,I="calc("+x+" + ("+e.options.columnHeaderHeight+" * "+b+"))";g.css({height:I})}c++}},me.createColumnHeadersEvents=function(e){var o,n,t=!1,r=function(){void 0==o&&(o=document.createElement("hr"),o.classList.add("ui-deni-grid-vertical-line-resizing"),e.colsViewport.append(o));var n=event.pageX-e.colsViewport.offset().left;$(o).css({display:"block",left:n,height:e.colsViewport.height()+"px"})},i=function(){e.resizing=!1,n=null,e.colsViewport.css("cursor","default"),o&&$(o).css("display","none")};e.headerContainer.mousedown(function(o){e.enabled&&(headerContainerColumn=$(o.target).closest(".ui-header-container-column"),headerContainerColumn.length>0&&t&&(e.resizing=!0),o.preventDefault())});var a=function(e,o){var n=e.parents(".ui-header-container-column:eq(0)");if(n.length>0){var t=n.find(".ui-header-container-column"),r=t.length;
return n.width(n.width()+o-r),a(n,o)}return e};$(document).mouseup(function(o){if(e.enabled){if(e.resizing){if(n){var t=n.getBoundingClientRect().left+n.clientWidth,r=o.pageX-t;$headerContainerColumnResizing=$(n);var l=$headerContainerColumnResizing.width()+r;if($headerContainerColumnResizing.is(".has-subcolumns")){var s=$headerContainerColumnResizing.find(".ui-header-container-column.last-subcolumn"),d=s.width();$headerContainerColumnResizing.width(l);var c=1;s.width(d+r+c)}else{a($headerContainerColumnResizing,r);$headerContainerColumnResizing.width(l)}uiDeniGridUtilSrv.adjustAllColumnWidtsAccordingColumnHeader(e)}i()}e.colsViewport.css("cursor","default"),o.preventDefault()}});var l=function(e,o,n){var t;return function(){var r=this,i=arguments,a=function(){t=null,n||e.apply(r,i)},l=n&&!t;clearTimeout(t),t=setTimeout(a,o),l&&e.apply(r,i)}};$(document).mousemove(function(o){if(e.enabled){if(e.options.enableColumnResize)if(1===o.which)e.resizing&&l(r(),100);else if(0===o.which&&(e.colsViewport.css("cursor","default"),headerContainerColumn=$(o.target).closest(".ui-header-container-column"),headerContainerColumn.length>0)){var i=e.headerContainer.find(".ui-header-cell");t=!1,n=null;for(var a=0;a<i.length;a++){var s=i[a],d=s.getBoundingClientRect();if(o.clientX>d.right-5&&o.clientX<d.right+3){t=!0,e.colsViewport.css("cursor","col-resize"),n=s.closest(".ui-header-container-column");break}}}o.preventDefault()}});for(var s=e.headerContainer.find(".ui-header-cell"),d=0;d<s.length;d++){var c=$(s[d]);c.mouseenter(function(o){e.enabled&&$(o.currentTarget).addClass("hover")}),c.mouseleave(function(o){e.enabled&&$(o.currentTarget).removeClass("hover")}),c.mouseup(function(o){if(e.enabled&&1===o.which&&"default"==e.colsViewport.css("cursor")&&e.options.sortableColumns){var n=$(o.target.closest(".ui-header-container-column"));if(!n.is(".action-button-column")){var t=$(o.currentTarget),r="ASC";t.is(".asc")&&(r="DESC"),n.is(".has-subcolumns")||e.options.api.sort({name:t.attr("name"),direction:r})}}})}};var _sort=function(e,o){var n;if(angular.isString(o))n=[{name:o,direction:"ASC"}];else if(angular.isObject(o))n=angular.isArray(o)?o:[o];else{if(!angular.isFunction(o))throw new Error('"sort": param "sorters" passed in a wrong way');n=[o]}if(e.options.data){var t=function(o){for(var n=0;n<o.length;n++){var t=o[n],r=t.direction||"ASC";e.options.data=$filter("orderBy")(e.options.data,t.name,"DESC"==r.toUpperCase())}};e.options.fixedSorters&&t(e.options.fixedSorters),t(n)}return n},_repaintCardView=function(e,o){var n=e.options.cardView.numberOfColumns,t=$(document.createElement("div"));t.addClass("ui-row"),t.attr("rowindex",o.rowIndex),t.css("left","0px"),t.css("height",o.height),t.css("width","100%"),t.css("top",o.top+"px"),t.html('<table class="ui-table-card-view"><tr></tr></table>'),e.bodyContainer.append(t);for(var r=t.find("tr").get(0),i=(100/n).toString()+"%",a=0;a<n;a++){var l=o.rowIndex;o.rowIndex>0&&(l=o.rowIndex*n),l+=a;var s=e.options.data[l],d=$(r.insertCell());if(d.css("width",i),s){var c=uiDeniGridUtilSrv.applyTemplateValues(e.options.cardView.template,s);if(d.html(c),d.prop("record",s),d.click(function(o){e.bodyContainer.find("td").removeClass("selected"),$(o.currentTarget).addClass("selected"),e.options.listeners.onselectionchange&&e.options.listeners.onselectionchange(e,e.element,l,$(o.currentTarget).prop("record"))}),1==e.options.cardView.checkbox){var p=$(document.createElement("input"));p.addClass("checkbox"),p.attr("type","checkbox"),e.checkedRecords.indexOf(s)!=-1&&p.attr("checked",!0),p.click(function(o){var n=$(o.target.parent).prop("record"),t=e.checkedRecords.indexOf(n);t!=-1&&e.checkedRecords.splice(t,1),o.target.checked&&e.checkedRecords.push(n),e.options.listeners.oncheckboxchange&&e.options.listeners.oncheckboxchange(n,e.checkedRecords,o.target)}),d.append(p)}}}o.rowElement=t},_repaintRow=function(e,o,n,t,r){var i=r||e.managerRendererItems.getInfoRow(o);if(n&&(i.rendered=!1,angular.isDefined(i.rowElement)&&i.rowElement.remove(),i.rowElement=void 0),!i.rendered){if(angular.isDefined(e.options.cardView))_repaintCardView(e,i);else{var a=e.options.data[i.rowIndex];i.rowElement=_renderRowEl(e,i,a)}i.rowElement&&e.options.listeners.onafterrepaintrow&&e.options.listeners.onafterrepaintrow(i.rowIndex,i.rowElement),t&&e.options.listeners.onafterrepaint&&e.options.listeners.onafterrepaint(e)}},_repaint=function(e,o){for(var n=e.managerRendererItems.getVisibleRows(),t=0;t<n.length;t++){var r=n[t];_repaintRow(e,r.rowIndex,o,null,r)}e.options.listeners.onafterrepaint&&e.options.listeners.onafterrepaint(e),e.managerRendererItems.removeAllNotVisibleElementsRows(e,n)};me.sort=function(e,o,n){var t;0!=n&&(t=me.getSelectedRow(e)),e.headerContainer.find("div.ui-header-cell").removeClass("sort").removeClass("asc").removeClass("desc");var r;if(e.options.api.isGrouped())r=_sort(e,o),e.bodyContainer.find(".ui-row.collapse").filter(function(){var o=$(this),n=(parseInt(o.attr("groupIndex")),parseInt(o.attr("rowindex"))),t=e.options.data[n];uiDeniGridUtilSrv.groupCollapse(e,o,t,n),uiDeniGridUtilSrv.groupExpand(e,o,t,n)});else if(e.options.rowDetails){var i=[];e.bodyContainer.find(".ui-row.row-detail-expanded").filter(function(){var o=parseInt($(this).attr("rowindex")),n=e.options.data[o];i.push(n)});r=_sort(e,o),e.options.api.loadData(e.options.data);for(var a=0;a<i.length;a++){var l=i[a],s=e.options.api.resolveRowIndex(l),d=e.options.api.resolveRowElement(s);uiDeniGridUtilSrv.rowDetailsExpand(e,d,l,s)}_repaint(e)}else r=_sort(e,o),e.options.api.loadData(e.options.data);for(var a=0;a<r.length;a++){var c=r[a];if(!angular.isFunction(c)){var p=$(_getHeaderColElementByName(e,c.name,!0));p.addClass("sort"),p.addClass(c.direction?c.direction.toLowerCase():"asc")}}return t&&me.selectRow(e,t),r};var _getHeaderColElementByName=function(e,o,n){var t=e.headerContainer.find('div.ui-header-cell[name="'+o+'"]');if(0==t.length){if(n)throw new Error('There is not a columns with a name "'+o+'"!');return null}return t[0]},_rendererRealcedCells=function(e,o,n){if(e&&o){e=e.toString();var t=e.toLowerCase().indexOf(o.toLowerCase()),t=e.search(new RegExp(o,"i"));if(t!=-1){for(var r="",i=0;t!=-1;)r+=e.substring(i,t),r+='<span style="'+n+'">'+e.substring(t,t+o.length)+"</span>",i=t+o.length,t=e.toLowerCase().indexOf(o.toLowerCase(),i);return r+=e.substring(i,e.length)}}return e},_createDivCell=function(e,o){var n=$(document.createElement("div"));return n.addClass("ui-cell"),e.options.colLines&&n.css("border-right","solid 1px #e6e6e6"),e.options.rowLines&&n.css("border-bottom","solid 1px #e6e6e6"),o.is(".row-detail")||(n.mouseenter(function(n){e.enabled&&("row"==e.options.selType?(e.bodyViewport.find(".ui-row[rowindex="+o.attr("rowindex")+"]:not(.row-detail)").find(".ui-cell").addClass("hover"),e.fixedColsBodyViewport.find(".ui-row[rowindex="+o.attr("rowindex")+"]:not(.row-detail)").find(".ui-cell").addClass("hover")):$(n.currentTarget).addClass("hover"))}),n.mouseleave(function(n){e.enabled&&(e.bodyViewport.find(".ui-row[rowindex="+o.attr("rowindex")+"]").find(".ui-cell").removeClass("hover"),e.fixedColsBodyViewport.find(".ui-row[rowindex="+o.attr("rowindex")+"]").find(".ui-cell").removeClass("hover"))}),n.mousedown(function(o){if(e.enabled&&1===o.which)if("row"==e.options.selType){var n=$(o.currentTarget),t=n.closest(".ui-row");parseInt(t.attr("rowindex"));me.selectRow(e,t)}else{var n=$(o.currentTarget),r=parseInt(n.attr("colIndex")),t=n.closest(".ui-row");parseInt(t.attr("rowindex"));me.selectCell(e,t,r)}}),n.dblclick(function(o){var n=$(o.target);if(n.is(".ui-cell-inner")){var t=$(o.currentTarget),r=parseInt(t.attr("colIndex")),i=uiDeniGridUtilSrv.getColumns(e,e.options.columns),a=i[r];if(a.editor){var l=t.closest(".ui-row"),s=parseInt(l.attr("rowindex")),d=e.options.data[s];uiDeniGridUtilSrv.setInputEditorDivCell(e,d,a,t)}}})),o.append(n),n},_createDivCellInner=function(e){var o=$(document.createElement("span"));return o.addClass("ui-cell-inner"),e.append(o),o};me.createUiDeniViewEvents=function(controller){controller.options.listeners.onrenderer=function(rowElement,fixedRowElement,record,itemToRender,viewController){if(angular.isDefined(controller.options.rowTemplate)){var divCell=_createDivCell(controller,rowElement);rowElement.css("width","100%"),divCell.css("width","100%"),valueToRender=uiDeniGridUtilSrv.applyTemplateValues(controller.options.rowTemplate,record),divCell.html(valueToRender)}else if(rowElement.is(".row-detail")){var divCell=_createDivCell(controller,rowElement);divCell.addClass("row-detail");var spanCellInner=_createDivCellInner(divCell);spanCellInner.addClass("row-detail"),itemToRender.expanded?spanCellInner.addClass("collapse"):spanCellInner.addClass("expand"),spanCellInner.css("cursor","pointer"),spanCellInner.click(function(e){spanCellInner.toggleClass("expand collapse"),rowElement.toggleClass("expand collapse"),spanCellInner.is(".collapse")?uiDeniGridUtilSrv.groupExpand(controller,rowElement,record,itemToRender.rowIndex):uiDeniGridUtilSrv.groupCollapse(controller,rowElement,record,itemToRender.rowIndex)});var valueToRender;if(controller.options.grouping.template){var totalRowsInGroup=parseInt(rowElement.attr("children")||0);valueToRender=uiDeniGridUtilSrv.applyTemplateValues(controller.options.grouping.template,record,{count:totalRowsInGroup})}spanCellInner.html(valueToRender)}else if(rowElement.is(".ui-grouping-footer-container")){var columns=controller.options.columns,totalRowsInGroup=parseInt(rowElement.attr("children")||0),records=controller.options.data.slice(itemToRender.rowIndex,itemToRender.rowIndex+totalRowsInGroup);uiDeniGridUtilSrv.createColumnFooters(controller,rowElement,columns,!1),uiDeniGridUtilSrv.renderColumnFooters(controller,rowElement,columns,records,!1)}else for(var isRowSelected=rowElement.is(".selected"),columns=uiDeniGridUtilSrv.getColumns(controller,controller.options.columns),colIndex=0,index=0;index<columns.length;index++){if(0==index&&controller.options.fixedCols){if(controller.options.fixedCols.checkbox){var divCellIndicator=_createDivCell(controller,fixedRowElement);divCellIndicator.css("width",uiDeniGridConstants.FIXED_COL_CHECKBOX_WIDTH),divCellIndicator.addClass("auxiliar-fixed-column");var spanCellIndicatorInner=_createDivCellInner(divCellIndicator);spanCellIndicatorInner.addClass("checkbox");var inputCheck=$(document.createElement("input"));inputCheck.attr("type","checkbox"),inputCheck.css({cursor:"pointer"}),spanCellIndicatorInner.append(inputCheck),colIndex++}if(controller.options.fixedCols.indicator){var divCellIndicator=_createDivCell(controller,fixedRowElement);divCellIndicator.css("width",uiDeniGridConstants.FIXED_COL_INDICATOR_WIDTH),divCellIndicator.addClass("auxiliar-fixed-column");var spanCellIndicatorInner=_createDivCellInner(divCellIndicator);spanCellIndicatorInner.addClass("indicator"),colIndex++}if(controller.options.fixedCols.rowNumber){var divCellRowNumber=_createDivCell(controller,fixedRowElement);divCellRowNumber.css("width",uiDeniGridConstants.FIXED_COL_ROWNUMBER_WIDTH),divCellRowNumber.addClass("auxiliar-fixed-column");var spanCellRowNumberInner=_createDivCellInner(divCellRowNumber);spanCellRowNumberInner.addClass("rownumber"),spanCellRowNumberInner.html(itemToRender.rowIndex+1),colIndex++}}var column=columns[index],divCell;divCell=uiDeniGridUtilSrv.isFixedColumn(controller,column.name)?_createDivCell(controller,fixedRowElement):_createDivCell(controller,rowElement),divCell.attr("colIndex",colIndex);var spanCellInner=_createDivCellInner(divCell);if(column.action){spanCellInner.css("text-align","center"),spanCellInner.addClass("ui-cell-inner-action");var iconActionColumn=column.action.mdIcon||column.action.icon;angular.isFunction(iconActionColumn)&&(iconActionColumn=iconActionColumn(record));var imgActionColumn;if(column.action.mdIcon){var imgActionColumnBtn=$(document.createElement("md-button"));if(column.action.tooltip){var imgActionColumnBtnTooltip=$(document.createElement("md-tooltip")),textTooltip;textTooltip=angular.isFunction(column.action.tooltip)?column.action.tooltip(record):column.action.tooltip,imgActionColumnBtnTooltip.html(textTooltip),imgActionColumnBtn.append(imgActionColumnBtnTooltip)}imgActionColumn=$(document.createElement("md-icon")),imgActionColumn.addClass("material-icons"),imgActionColumn.html(iconActionColumn),imgActionColumnBtn.append(imgActionColumn);var imgActionColumnBtnCompiled=$compile(imgActionColumnBtn)(controller.scope);spanCellInner.append(imgActionColumnBtn),imgActionColumnBtn.find("md-icon").prop("column",column),imgActionColumnBtn.click(function(e){var o=$(e.currentTarget).find("md-icon"),n=o.prop("column");n.action.fn(record,column,o)})}else imgActionColumn=$(document.createElement("img")),imgActionColumn.attr("src",iconActionColumn),imgActionColumn.attr("title",column.action.tooltip),spanCellInner.append(imgActionColumn),imgActionColumn.prop("column",column),imgActionColumn.click(function(e){var o=$(e.currentTarget),n=o.prop("column");n.action.fn(record,column,imgActionColumn)}),imgActionColumn.css("cursor","pointer")}else{0==index&&controller.options.rowDetails&&(spanCellInner.addClass("row-detail"),itemToRender.expanded||controller.options.rowDetails.autoExpand===!0?spanCellInner.addClass("collapse"):spanCellInner.addClass("expand"),spanCellInner.click(function(e){if(e.offsetX<=12){var o=$(e.target);o.is(".collapse")?uiDeniGridUtilSrv.rowDetailsCollapse(controller,rowElement,record,itemToRender.rowIndex):uiDeniGridUtilSrv.rowDetailsExpand(controller,rowElement,record,itemToRender.rowIndex)}}));var style=column.style||{};divCell.css(angular.extend(style,{"text-align":column.align||"left"})),0==index&&controller.options.api.isGrouped()&&divCell.css("padding-left","20px");var value=null;try{value=eval("record."+column.name)}catch(err){}column.renderer&&(value=column.renderer(value,record,columns,itemToRender.rowIndex));var formattedValue=value;angular.isDefined(column.format)&&(formattedValue=uiDeniGridUtilSrv.getFormatedValue(value,column.format)),controller.searchInfo?isRowSelected&&(formattedValue=_rendererRealcedCells(column.name,formattedValue,controller.searchInfo.valuesToField,controller.searchInfo.opts.inLine.realce.style)):controller.filterInfo&&controller.filterInfo.options.realce&&(formattedValue=_rendererRealcedCells(formattedValue,controller.filterInfo.valuesToFilter,controller.filterInfo.options.realce)),spanCellInner.html(formattedValue)}divCell.css("width",column.realPercentageWidth||column.width),colIndex++}},controller.options.listeners.onafterexpand=function(e,o,n,t){if(e.length>0){var r=controller.options.api.resolveRowIndex(e[0]);me.selectRow(controller,r)}if(uiDeniGridUtilSrv.hasColumnFooter(controller)){var i=n.prop("footer");if(angular.isDefined(i))i.css("display","block");else{var i=$(document.createElement("div"));i.addClass("ui-deni-grid-grouping-footer-container"),n.prop("footer",i),i.insertAfter(t),uiDeniGridUtilSrv.renderColumnFooters(i,controller.footerContainer,controller.options.columns,e,controller)}}},controller.options.listeners.onafterrepaint=function(e){uiDeniGridUtilSrv.adjustAllColumnWidtsAccordingColumnHeader(controller)},controller.bodyViewport.scroll(function(e){var o=$(this).scrollLeft();if(controller.bodyViewport.currentScrollLeft===o){controller.bodyViewport.currentScrollTop=$(this).scrollTop();var n=controller.bodyViewport.find(".ui-row:eq(0)");if(n.length>0){var t=(n.get(0).getBoundingClientRect().top,controller.bodyViewport.currentScrollTop*-1+"px");controller.options.fixedCols&&controller.fixedColsBodyContainer.css("top",t)}}else{controller.bodyViewport.currentScrollLeft=o;var n=controller.bodyViewport.find(".ui-row:eq(0)");if(n.length>0){var r=(n.get(0).getBoundingClientRect().left,controller.bodyViewport.currentScrollLeft*-1+"px");controller.headerContainer.css("left",r),uiDeniGridUtilSrv.hasColumnFooter(controller)&&controller.footerDivContainer.find(".ui-deni-grid-footer").css("left",r)}}_repaint(controller)})},me.getSelectedRow=function(e){return void 0===e.rowIndex?null:e.options.data[e.rowIndex]},me.getChangedRecords=function(e){for(var o=e.bodyViewport.find("div.ui-row.changed"),n=e.options.data,t=[],r=0;r<o.length;r++){var i=$(o[r]).attr("rowindex"),a=n[i];t.push(a)}return t};var _resolveJavaScriptElement=function(e){return angular.isElement(e)?e.get(0):e},_resolveJQueryElement=function(e){return angular.isElement(e)?e:$(e)},_resolveRecord=function(e,o){return angular.isObject(o)?o:e.options.data[o]};me.isRowSelected=function(e,o){var n=e.options.api.resolveRowElement(o);return n.is(".selected")},me.getSelectedRowIndex=function(e){return e.rowIndex},me.getSelectedRowIndexes=function(e){for(var o=[],n=e.bodyViewport.find(".ui-row.selected"),t=0;t<n.length;t++)o.push(parseInt($(n[t]).attr("rowindex")));return o},me.selectRow=function(e,o,n,t){if(!(e.options.data&&e.options.data.length>0))throw new Error('"selectRow": There is not record to select!');var r;if(angular.isElement(o))r=o,e.rowIndex=parseInt(r.attr("rowindex"));else{var i;if(i=e.options.api.isGrouped()?e.options.api.resolveRowIndex(o):e.options.api.resolveRowIndex(o),t=0!=t,i==-1)throw new Error("selectRow: row passed in a wrong way!");var a=function(e){};if(me.isRowSelected(e,i))a(i);else if(e.rowIndex=i,e.options.api.isGrouped()){var l=e.managerRendererItems.getInfoRow(i);if(!l){var s=e.options.data[i].groupIndex,d=e.managerRendererItems.getInfoGroup(s);e.colsViewport.scrollTop(d.top),_repaint(e);var c=e.options.data[i];uiDeniGridUtilSrv.groupExpand(e,d.rowElement,c,i),l=e.managerRendererItems.getInfoRow(i)}e.colsViewport.scrollTop(l.top),_repaint(e),r=l.rowElement}else{var p=parseInt(e.options.rowHeight.replace("px","")),u=i*p-e.bodyViewportWrapper.height()/2;e.bodyViewport.scrollTop(u),_repaint(e);var l=e.managerRendererItems.getInfoRow(i);r=l.rowElement}}if(void 0===e.rowIndex||e.options.multiSelect||e.options.api.clearSelections(),r.addClass("selected"),e.bodyViewport.find(".ui-row[rowindex="+r.attr("rowindex")+"]:not(.row-detail)").find(".ui-cell").addClass("selected"),e.fixedColsBodyViewport.find(".ui-row[rowindex="+r.attr("rowindex")+"]:not(.row-detail)").find(".ui-cell").addClass("selected"),e.options.fixedCols){var f=e.fixedColsBodyContainer.find(".ui-fixed-row[rowindex="+r.attr("rowindex")+"]:not(.row-detail)");f.addClass("selected"),f.find(".ui-cell.indicator").addClass("selected")}e.options.rowDetails&&r.parent().find(".ui-row.row-detail-container[rowIndex="+r.attr("rowindex")+"]").addClass("selected"),n||e.options.listeners.onselectionchange&&e.options.listeners.onselectionchange(e,e.element,e.rowIndex,e.options.data[e.rowIndex])},me.selectCell=function(e,o,n,t,r){if(e.options.data&&e.options.data.length>0){r=0!=r;var i=e.options.api.resolveRowElement(o);if(0==o.length)throw new Error("selectCell: row passed in a wrong way!");var a=i.find(".ui-cell[colIndex="+n+"]");if(0==a.length)throw new Error("selectCell: colIndex passed in a wrong way!");e.options.multiSelect||e.options.api.clearSelections(),a.addClass("selected");var l=e.options.api.resolveRowIndex(o);e.rowIndex=l,e.colIndex=n}},me.getColumn=function(e,o){for(var n=0;n<e.options.columns.length;n++)if(e.options.columns[n].name==o)return e.options.columns[n];return null},me.updateSelectedRow=function(controller,json){if(void 0===controller.rowIndex)throw"You have to select a record";for(var fieldsNotNested=uiDeniGridUtilSrv.prepareForNestedJson(json),keyFieldsToChange=Object.keys(fieldsNotNested),record=controller.options.data[controller.rowIndex],dataKeys=Object.keys(record),index=0;index<keyFieldsToChange.length;index++){var fieldNameToChange=keyFieldsToChange[index];if(dataKeys.indexOf(fieldNameToChange)==-1)console.warn('"updateSelectedRow" : field "'+fieldNameToChange+'" not found!');else{var newValue=eval("json."+fieldNameToChange);record[fieldNameToChange]=newValue}}_repaintRow(controller,controller.rowIndex,!0,!0)},me.updateCell=function(e,o,n,t){var r=e.options.api.resolveRowElement(o),i=r.find(".ui-cell[colIndex="+n+"]"),a=i.find(".ui-cell-inner");a.html(t),i.addClass("changed"),i.closest(".ui-row").addClass("changed")},me.updateSelectedCell=function(e,o){if(!angular.isDefined(e.rowIndex)||!angular.isDefined(e.colIndex))throw"You have to select a record";me.updateCell(e,e.rowIndex,e.colIndex,o)},me.isHideHeaders=function(e){return e.options.hideHeaders},me.setHideHeaders=function(e,o){var n;n=o?"none":"block",e.colsViewport.find(".ui-header-viewport").css("display",n),e.options.hideHeaders=o},me.getPageNumber=function(e){return e.options.paging.currentPage},me.setPageNumber=function(e,o){e.options.paging.currentPage=o,e.paging.find("input.input-page-number").val(o),e.options.api.reload(),_checkDisableButtonsPageNavigation(e,e.options.data,o)};var _checkDisableButtonsPageNavigation=function(e,o,n){var t=e.paging.find(".button.button-first"),r=e.paging.find(".button.button-prev"),i=e.paging.find(".button.button-next"),a=e.paging.find(".button.button-last"),l=e.paging.find(".button.button-additional"),s=o.length>0&&n>1,d=o.length>0&&n<e.options.paging.pageCount;o.length>0?l.removeClass("disabled"):l.addClass("disabled"),s?(t.removeClass("disabled"),r.removeClass("disabled")):(t.addClass("disabled"),r.addClass("disabled")),d?(i.removeClass("disabled"),a.removeClass("disabled")):(i.addClass("disabled"),a.addClass("disabled"))},_getPropertyXML=function(e,o,n){var t=o.nodeName.toLowerCase();if(n&&(t=n+"."+t),e.indexOf(t)==-1){e.push(t);for(var r=0;r<o.children.length;r++)_getPropertyXML(e,o.children[r],t)}},isArrayItem=function(e){if(angular.isDefined(e.children)&&e.children.length>0){for(var o="",n=0;n<e.children.length;n++)if(""==o)o=e.children[n].nodeName.toLowerCase();else if(e.children[n].nodeName.toLowerCase()!=o)return!1;return!0}return!1},_getRecordXML=function(e,o,n){for(var t=n?n:{},r=0;r<o.children.length;r++){var i=o.children[r],a=i.nodeName.toLowerCase();if(0==i.children.length)t[a]=i.textContent;else if(isArrayItem(i)){for(var l=[],s=0;s<i.children.length;s++)_getRecordXML(l,i.children[s]);t[a]=l}else t[a]={},_getRecordXML(e,i,t[a])}angular.isDefined(n)||e.push(t)},_xmlToJson=function(e,o){for(var n=$(o),t=n.find(e.options.restConfig.data).find(e.options.restConfig.dataItems),r=[],i=0;i<t.length;i++)_getRecordXML(r,t[i]);var a={success:!0};return a[e.options.restConfig.data]=r,a[e.options.restConfig.total]=parseInt(n.find(e.options.restConfig.total).text()),a},_getDefaultRequestPromise=function(e){var o=$q.defer();return $http.get(e).then(function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise};me.load=function(e){var o=$q.defer();if(e.options.url){e.options.data||e.bodyViewport.addClass("initilizing-data"),e.loading=!0;var n=e.options.url;if(e.options.paging){var t=e.options.paging.currentPage;e.paging.find("input.input-page-number").val(t);var r=e.options.paging.pageSize,i=(t-1)*r;n+=n.indexOf("?")===-1?"?":"&",n+="page="+t+"&"+e.options.restConfig.start+"="+i+"&"+e.options.restConfig.limit+"="+r}var a=e.options.requestPromise;e.options.requestPromise||(a=_getDefaultRequestPromise),a(n).then(function(n){var t;if(t="xml"==e.options.restConfig.type?_xmlToJson(e,n.data):n.data,angular.isArray(t)&&(t={success:!0,data:t,total:t.length}),e.options.paging){e.options.paging.dataLength=t[e.options.restConfig.total],e.options.paging.pageCount=Math.ceil(e.options.paging.dataLength/e.options.paging.pageSize),e.options.api.loadData(t[e.options.restConfig.data]),o.resolve(t[e.options.restConfig.data]),e.paging.find(".label-page-count").html("of "+e.options.paging.pageCount);var r=e.options.paging.pageSize,i=(e.options.paging.currentPage-1)*r,a=i+e.options.paging.pageSize;a>e.options.paging.dataLength&&(a=e.options.paging.dataLength),e.paging.find(".label-displaying").html(i+" - "+a),e.paging.find(".label-record-count").html(e.options.paging.dataLength+" records")}else e.options.api.loadData(t[e.options.restConfig.data]),o.resolve(t[e.options.restConfig.data]);e.bodyViewport.removeClass("initilizing-data"),e.loading=!1},function(n){e.loading=!1,o.reject(n.statusText)})}else e.loading=!1,o.reject('"load" : To use load function is necessary set the url property.');return o.promise},me.reload=function(e){return me.load(e)},me.loadData=function(controller,data){if(controller.options.listeners.onbeforeload&&controller.options.listeners.onbeforeload(data,controller.options),uiDeniGridUtilSrv.hasColumnFooter(controller)&&(uiDeniGridUtilSrv.renderColumnFooters(controller,controller.footerContainer,controller.options.columns,data,!0),uiDeniGridUtilSrv.remakeHeightBodyViewportWrapper(controller)),controller.renderedIndexes=[],controller.filterInfo){var valuesToFilterObj;if(angular.isString(controller.filterInfo.valuesToFilter)){for(var columnNames=[],index=0;index<controller.options.columns.length;index++)columnNames.push(controller.options.columns[index].name);controller.options.data=$filter("filter")(data,function(e,o,n){for(var t=0;t<columnNames.length;t++){var r=e[columnNames[t]];if(r&&r.toString().search(new RegExp(controller.filterInfo.valuesToFilter,"i"))!=-1)return!0}return!1})}else controller.options.data=$filter("filter")(data,controller.filterInfo.valuesToFilter)}else controller.options.data=data;controller.options.alldata=data,controller.groupRecords=[],controller.options.dataGroup=[],controller.bodyContainer.find(".ui-row").remove(),controller.fixedColsBodyContainer.find(".ui-row").remove();var rowHeight=parseInt(controller.options.rowHeight.replace("px",""));controller.rowsPerPage=parseInt(controller.bodyViewport.height()/rowHeight)+1;var limitLength=data.length<controller.rowsPerPage?data.length:controller.rowsPerPage;if(controller.options.api.isGrouped()){var expressionToGroup=controller.options.grouping.expr,getEvalFieldValue=function(record,fieldName){return eval("record."+fieldName)},getEvalExpressionValue=function(record,expression){var evalStr="(function() {\n\t\twith (record) {\n\t\t\t\treturn "+expression+"\n\t\t}\n})()";return eval(evalStr)},fieldsNotNested=uiDeniGridUtilSrv.prepareForNestedJson(controller.options.data[0]),fields=Object.keys(fieldsNotNested),functionToEvaluate;functionToEvaluate=fields.indexOf(controller.options.grouping.expr)?getEvalFieldValue:getEvalExpressionValue,controller.options.data=$filter("orderBy")(controller.options.data,expressionToGroup),controller.options.fixedSorters=[{name:expressionToGroup,direction:"ASC"}];for(var oldValue,recordGroup,groupIndex=-1,index=0;index<controller.options.data.length;index++){var record=controller.options.data[index],value=functionToEvaluate(record,expressionToGroup);oldValue==value?recordGroup.children++:(oldValue=value,groupIndex++,recordGroup=record,recordGroup.children=1,controller.options.dataGroup.push(record)),record.groupIndex=groupIndex,record.rowIndex=index}controller.bodyContainer.height(controller.options.dataGroup.length*rowHeight+2),controller.options.fixedCols&&controller.fixedColsBodyContainer.height(controller.bodyContainer.height())}else{var heightBodyContainer;heightBodyContainer=controller.options.cardView?Math.ceil(controller.options.data.length/controller.options.cardView.numberOfColumns)*rowHeight:controller.options.data.length*rowHeight,controller.bodyContainer.height(heightBodyContainer+2),controller.options.fixedCols&&controller.fixedColsBodyContainer.height(controller.bodyContainer.height())}controller.managerRendererItems.createItems(),_repaint(controller),uiDeniGridUtilSrv.remakeHeightBodyViewportWrapper(controller),controller.options.data.length>0&&controller.options.api.selectRow(0,!1,!1),controller.options.listeners.onafterload&&controller.options.listeners.onafterload(controller.options.data,controller.options),controller.options.paging&&_checkDisableButtonsPageNavigation(controller,data,controller.options.paging.currentPage)},me.findKey=function(e,o,n){var t=JSON.parse('{"'+e.options.keyField+'": "'+o+'"}');return me.find(e,t,n)},me.find=function(controller,valuesToFind,opts){var data=controller.options.data||[];valuesToFind=valuesToFind||{};var keys=Object.keys(valuesToFind);if(0==data.length)throw new Error('"Find" : There is no data to find!');if(0==keys.length)throw new Error('"Find" : param "valuesToFind" must be informed!');opts=opts||{};var exactSearch=0!=opts.exactSearch,all=1==opts.all,ignoreCase=1==opts.ignoreCase,recordsFound=[],breakParentLoop=!1,newJson=uiDeniGridUtilSrv.prepareForNestedJson(valuesToFind);keys=Object.keys(newJson);for(var found=!1,index=0;index<data.length;index++){for(var record=data[index],foundRecord=!1,fieldIndex=0;fieldIndex<keys.length;fieldIndex++){var fieldName=keys[fieldIndex],valueToFind=valuesToFind[fieldName],value=eval("record."+fieldName),valueIsString=angular.isString(value);ignoreCase&&valueIsString&&(valueToFind=valueToFind.toLowerCase(),value=value.toLowerCase()),foundRecord=exactSearch||!valueIsString?valueToFind==value:value.indexOf(valueToFind)!=-1}if(foundRecord&&(found=!0,recordsFound.push(record),!all))break}if(found&&opts.inLine){var inLineDefaultValue={realce:!1},inLine;if(opts.inLine===!0)inLine=inLineDefaultValue;else{if(!angular.isObject(opts.inLine))throw new Error('"find": param "inLine" passed in a wrong way');inLine=opts.inLine}var inLineRealceDefaultValue={style:"background-color:#FFFF00;color:black;padding:1px;"},inLineRealce;inLine.realce&&(1==inLine.realce?inLine.realce=inLineRealceDefaultValue:(inLine.realce=opts.inLine.realce,inLine.realce.style=inLine.realce.style||inLineRealceDefaultValue.style)),inLine.scrollIntoView=0!=inLine.scrollIntoView,controller.searchInfo={valuesToFind:valuesToFind,opts:opts};var selectAndRemoveRendered=function(e,o,n){controller.options.api.selectRow(e,o,n);var t=controller.options.api.resolveRowElement(e);t.attr("rendered",!1)};if(controller.options.api.clearSelections(),Array.isArray(recordsFound))if(controller.options.multiSelect)for(var index=0;index<recordsFound.length;index++)selectAndRemoveRendered(recordsFound[index],0!=index,0==index);else recordsFound.length>1&&console.warn('"find": More than one record was returned, but as the "inLine" property is true and "multiSelect" is false, just the first record will be selected.'),selectAndRemoveRendered(recordsFound[0],!1,!0);else null!=recordsFound&&selectAndRemoveRendered(recordsFound,preventSelecionChange,scrollIntoView);_repaint(controller)}return all?recordsFound:recordsFound[0]},me.filter=function(e,o,n){e.filterInfo={},e.filterInfo.valuesToFilter=o,e.filterInfo.options=angular.extend({realce:uiDeniGridConstants.DEFAULT_REALCE_CELLS,remote:!1},n||{}),e.filterInfo.options.remote?console.info("TODO : remote filter is not implemented!!"):e.options.api.loadData(e.options.alldata)},me.getRowHeight=function(e){return e.options.rowHeight},me.setRowHeight=function(e,o){var n=e.bodyViewport.find("div.ui-row:not(.grouping-footer-container)");n.css("height",e.options.rowHeight)},me.getRowElement=function(e,o){var n=_resolveRowIndex(o);return me.bodyViewport.find("div.ui-row[rowIndex="+n+"]")};var _recreateAll=function(e){e.options.data&&(e.bodyViewport.find("div.ui-deni-view-group-header").remove(),e.bodyViewport.find("div.ui-row").remove(),me.loadData(e,e.options.data))};me.toogleGrouping=function(e){e.options.enableGrouping=!e.options.enableGrouping,_recreateAll(e)},me.isEnableGrouping=function(e){return e.options.enableGrouping},me.isGrouped=function(e){return e.isGrouped},me.setEnableGrouping=function(e){e.options.enableGrouping=!0,_recreateAll(e)},me.setDisableGrouping=function(e){e.options.enableGrouping=!1,_recreateAll(e)};var _renderRowEl=function(e,o,n){var t=$(document.createElement("div"));t.addClass("ui-row"),t.attr("rowindex",o.rowIndex.toString()),t.css("left","0px");var r;if(e.options.fixedCols&&(r=$(document.createElement("div")),r.addClass("ui-row"),r.attr("rowindex",o.rowIndex.toString()),r.css("left","0px"),e.fixedColsBodyContainer.append(r)),o.rowDetails){var i=e.bodyContainer.find(".ui-row[rowIndex="+o.rowIndex+"]:not(.row-detail-container)");t.insertAfter(i);var a=i.find(".ui-cell:eq(0)").is(".selected");a&&t.addClass("selected"),t.addClass("row-detail-container");
var l=$(document.createElement("div"));l.addClass("row-detail-box"),t.append(l);var i=e.options.api.resolveRowElement(o.rowIndex);if(t.css("height",o.height+"px"),t.css("top",o.top+"px"),t.insertAfter(i),t.click(function(){e.options.api.selectRow(i)}),o.rowElement=t,e.options.rowDetails.template){var s=uiDeniGridUtilSrv.applyTemplateValues(e.options.rowDetails.template,n);o.rowElement.html(s)}else e.options.rowDetails.renderer&&e.options.rowDetails.renderer(o.rowElements,n)}else e.bodyContainer.append(t),t.css("height",o.height),t.css("top",o.top+"px"),e.options.fixedCols&&(r.css("height",o.height+"px"),r.css("top",o.top+"px")),angular.isDefined(o.children)?(o.footerContainer?t.addClass("ui-grouping-footer-container"):(t.addClass("row-detail"),t.addClass("grouping"),o.expanded?t.addClass("collapse"):t.addClass("expand")),t.attr("groupIndex",o.groupIndex),t.attr("children",o.children)):angular.isDefined(o.groupIndex)?(t.attr("groupIndex",o.groupIndex),t.attr("indexInsideGroup",o.indexInsideGroup),e.options.stripRows&&o.indexInsideGroup%2==1&&t.addClass("odd-row")):e.options.stripRows&&o.rowIndex%2==1&&(t.addClass("odd-row"),e.options.fixedCols&&r.addClass("odd-row"));return e.options.listeners.onbeforerender&&e.options.listeners.onbeforerender(t,e),e.options.listeners.onrenderer(t,r,n,o,e),e.options.listeners.onafterrender&&e.options.listeners.onafterrender(t,e),t.dblclick(function(o){var n=$(o.target),t=n.closest(".ui-row"),r=parseInt(t.attr("rowindex")),i=e.options.data[r];e.options.listeners.onrowdblclick&&e.options.listeners.onrowdblclick(i,t,r)}),o.rendered=!0,t};me.repaint=function(e){_repaint(e,!0)},me.repaintRow=function(e,o){var n=e.options.api.resolveRowIndex(o);_repaintRow(e,n,!0,!0)},me.repaintSelectedRow=function(e){var o=me.getSelectedRowIndex(e);me.repaintRow(e,o)},me.getRowIndex=function(e,o){for(var n=e.options.data,t=0;t<n.length;t++){var r=n[t];if(angular.equals(r,o))return t}return-1},me.removeRow=function(e,o){var n=e.options.api.resolveRowIndex(o),t=e.options.api.getSelectedRowIndex();if(e.managerRendererItems.removeRow(e,n),_repaint(e),e.options.data.length>0&&t!=-1){var r=t;r>n&&r--,e.options.api.selectRow(r,!1,!1)}},me.removeSelectedRows=function(e){for(var o=me.getSelectedRowIndexes(e),n=0,t=0;t<o.length;t++){var r=o[t];me.removeRow(e,r-n),n++}},me.resolveRowElement=function(e,o){var n=-1;if(angular.isObject(o)){if(angular.isElement(o))return o;n=me.getRowIndex(e,o)}else n=o;return e.bodyViewport.find(".ui-row[rowindex="+n+"]:not(.grouping)")},me.resolveRowIndex=function(e,o){return angular.isObject(o)?angular.isElement(o)?o.attr("rowindex"):me.getRowIndex(e,o):o},me.setEnabled=function(e,o){e.enabled=o,o?e.element.removeClass("disabled"):e.element.addClass("disabled")}}),angular.module("ui-deni-grid").run(["$templateCache",function(e){e.put("ui-deni-grid-sections",'                <div class="ui-viewport">\n                    <div class="ui-container">\n                        <div class="ui-header-viewport-wrapper">\n                            <div class="ui-header-viewport">\n                                <div class="ui-header-container">\n                                </div>\n                            </div>\n                        </div>\n                        <div class="ui-body-viewport-wrapper">\n                            <div class="ui-body-viewport">\n                                <div class="ui-body-container">\n                                </div>\n                            </div>\n                        </div>\n                        <div class="ui-footer-viewport-wrapper">\n                            <div class="ui-footer-viewport">\n                                <div class="ui-footer-container">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n'),e.put("ui-deni-grid",'<div class="ui-deni-grid-wrapper">\n    <div class="ui-deni-grid-viewport">\n        <div class="ui-deni-grid-container">\n            <div class="ui-fixed-cols-viewport-wrapper">\n'+e.get("ui-deni-grid-sections")+'            </div>\n            <div class="ui-variable-cols-viewport-wrapper">\n'+e.get("ui-deni-grid-sections")+'            </div>\n        </div>\n        <div class="ui-deni-grid-paging">\n        </div>\n    </div>\n    <div class="ui-deni-grid-loading ng-hide" ng-show="ctrl.loading">\n        <div class="image"></div>\n        <div class="text">Loading...</div>\n    </div>\n</div>')}]);